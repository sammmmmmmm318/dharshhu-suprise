<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Dharshini's Memory Vault</title>
    <link href="https://fonts.googleapis.com/css2?family=Gochi+Hand&family=Great+Vibes&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-color: #f4f1ea;
            --sage: #4a674a;
        }

        /* --- LOADING SCREEN --- */
        #loader {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background: #b2beb5;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            transition: opacity 0.5s ease;
        }
        .spinner {
            width: 40px; height: 40px;
            border: 4px solid rgba(255,255,255,0.3);
            border-top: 4px solid white;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        @keyframes spin { 100% { transform: rotate(360deg); } }

        /* --- SCRAPBOOK LAYOUT --- */
        body, html {
            margin: 0; padding: 0;
            background-color: #b2beb5;
            font-family: 'Gochi Hand', cursive;
            overflow-x: hidden;
        }

        .scrapbook-canvas {
            background-color: var(--bg-color);
            width: 100%;
            min-height: 100vh;
            padding: 40px 0;
            position: relative;
            visibility: hidden; /* Hidden until images load */
        }

        .header-title {
            font-family: 'Great Vibes', cursive;
            text-align: center;
            font-size: 3rem;
            color: var(--sage);
            margin-bottom: 20px;
        }

        /* Film Strip Container */
        .film-strip {
            background: #1a1a1a;
            padding: 15px 0;
            display: flex;
            justify-content: center; 
            gap: 10px;
            border-top: 3px dashed rgba(255,255,255,0.3);
            border-bottom: 3px dashed rgba(255,255,255,0.3);
            margin: 30px 0;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            width: 100%;
        }

        /* Individual Photo in Strip */
        .film-strip img {
            width: 17%; /* Adjusted to fit 5 photos with gaps */
            aspect-ratio: 1/1;
            object-fit: cover;
            border: 1px solid #333;
            background: #333; /* Placeholder color while loading */
        }

        /* Random tilts for the 5 strips */
        .strip-0 { transform: rotate(-1.5deg); }
        .strip-1 { transform: rotate(1.5deg); }
        .strip-2 { transform: rotate(-1deg); }
        .strip-3 { transform: rotate(1.2deg); }
        .strip-4 { transform: rotate(-2deg); }

        .back-btn {
            display: block; 
            width: fit-content; 
            margin: 50px auto;
            padding: 12px 30px; 
            background: var(--sage);
            color: white; 
            text-decoration: none; 
            border-radius: 25px;
            transition: transform 0.2s;
        }
        .back-btn:active { transform: scale(0.95); }
    </style>
</head>
<body>

    <div id="loader">
        <div class="spinner"></div>
        <div class="loading-text" style="color:white; margin-top:10px;">Developing Memories...</div>
    </div>

    <div class="scrapbook-canvas" id="main-content">
        <h1 class="header-title"> asdf</h1>
        
        <div id="strips-wrapper"></div>

        <a href="index.html" class="back-btn">‚Üê Back to Menu</a>
    </div>

    <script>
        const totalPhotos = 25; // 5 strips * 5 photos
        const photosPerStrip = 5;
        const wrapper = document.getElementById('strips-wrapper');
        let loadedCount = 0;
        let isFinished = false;

        // 1. Create the 5 strip containers first
        for (let s = 0; s < 5; s++) {
            const stripDiv = document.createElement('div');
            stripDiv.className = `film-strip strip-${s}`;
            stripDiv.id = `strip-${s}`;
            wrapper.appendChild(stripDiv);
        }

        // 2. Function to show content
        function hideLoader() {
            if (isFinished) return; // Prevent running twice
            isFinished = true;
            
            document.getElementById('loader').style.opacity = '0';
            setTimeout(() => {
                document.getElementById('loader').style.display = 'none';
                document.getElementById('main-content').style.visibility = 'visible';
            }, 500);

            // Mark Gallery as completed
            localStorage.setItem('card-3', 'done');
        }

        // 3. Safety Fallback: If images take > 5 seconds, show page anyway
        setTimeout(() => {
            if (!isFinished) {
                console.log("Loading taking too long, showing page anyway...");
                hideLoader();
            }
        }, 5000);

        // 4. Load images and place them in strips
        for (let i = 1; i <= totalPhotos; i++) {
            const img = new Image();
            img.src = `${i}.jpg`; // Ensure your files are named 1.jpg, 2.jpg...
            
            img.onload = img.onerror = () => {
                loadedCount++;
                if (loadedCount >= totalPhotos) {
                    hideLoader();
                }
            };

            // Determine which strip (0-4) the photo belongs to
            const stripIndex = Math.floor((i - 1) / photosPerStrip);
            const targetStrip = document.getElementById(`strip-${stripIndex}`);
            if (targetStrip) {
                targetStrip.appendChild(img);
            }
        }
    </script>

</body>
</html>

